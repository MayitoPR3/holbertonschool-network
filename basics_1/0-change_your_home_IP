#!/usr/bin/env bash

# Backup the original /etc/hosts file
sudo cp /etc/hosts /etc/hosts.bak

# Function to update /etc/hosts
update_hosts() {
    local ip="$1"
    local hostname="$2"

    # Check if the hostname already exists in /etc/hosts
    if grep -q "$hostname" /etc/hosts; then
        # If it exists, replace it
        sudo sed -i "/$hostname/d" /etc/hosts
    fi

    # Add the new entry
    echo "$ip $hostname" | sudo tee -a /etc/hosts > /dev/null
}

# Update localhost to resolve to 127.0.0.2
update_hosts "127.0.0.2" "localhost"

# Update facebook.com to resolve to 8.8.8.8
update_hosts "8.8.8.8" "facebook.com"

# Inform the user
echo "The /etc/hosts file has been updated. Please verify by using 'ping localhost' and 'ping facebook.com'."

# Reminder to revert changes
echo "Remember to revert 'localhost' to 127.0.0.1 if you will continue using this machine."
